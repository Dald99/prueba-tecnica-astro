---
import Layout from "../layouts/Layout.astro";
import type {GetStaticPaths} from "astro";
import type {User} from "../types/user"
import userData from "../data/users.json";
import Card from "../components/Card.astro";

export const getStaticPaths = (() => {
    const users: User[] = userData;

    return users
        .filter((user) => user.name && user.bio && user.avatarUrl && user.links) // Filtra usuarios con informaciÃ³n completa
        .map((user) => ({
            params: {
                user: user.username
            },
            props: {
                name: user.name,
                bio: user.bio,
                avatarUrl: user.avatarUrl,
                links: user.links,
                color: user.color ?? "#2d2d3a"
            }
        }));
}) satisfies GetStaticPaths;

const {user} = Astro.params;
const {name, bio, avatarUrl, color, links} = Astro.props;
---

<Layout title=`LinkDev | ${user}`>
    <main>
        <Card
                title={name}
                description={bio}
                imageUrl={avatarUrl}
                links={links}
                color={color}
        />
    </main>
</Layout>